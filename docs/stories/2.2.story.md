# Story 2.2: Build Basic CV Template Component

## Status

**Done**

---

## Story

**As a** developer,
**I want** a single professional CV template as a React component,
**so that** users can see their CV rendered with proper formatting.

---

## Acceptance Criteria

1. "Modern Tech" template component created with clean, single-column layout
2. All CV sections rendered: header (name, contact), summary, experience, education, skills, projects
3. Responsive design works on desktop (1440px+) and tablet (768px+). USE SHADCN MCP AND COMPONENTS FOR MAXIMUM ACCESIBILITY AND FEATURES LIKE TOOLTIPS,ETC
4. CSS custom properties used for colors, fonts, and spacing (enables design panel later)
5. Experience items show: company, role, dates, bullet points
6. Education items show: institution, degree, dates, achievements
7. Template receives CV data as props and renders without errors

---

## Tasks / Subtasks

- [x] **Task 1: Create Modern Tech Template Component Structure** (AC: 1, 7)
  - [x] Create component file: `components/cv-templates/modern-tech-template.tsx`
  - [x] Define component props interface: `{ cv: CVContent, designSettings?: DesignSettings }`
  - [x] Import CVContent type from `types/cv-content.ts` (created in Story 2.1)
  - [x] Set up component with TypeScript strict mode
  - [x] Add prop validation with default values for optional props
  - [x] Export component as default

- [x] **Task 2: Implement Header Section with Contact Info** (AC: 2)
  - [x] Create header section with personal info (name, email, phone, location)
  - [x] Display name with `<h1>` tag using large font size
  - [x] Add contact details row with icons (email, phone, location, LinkedIn, website)
  - [x] Use Lucide icons for contact items: Mail, Phone, MapPin, Linkedin, Globe
  - [x] Install icons: `npm install lucide-react` (if not already installed)
  - [x] Make phone, location, LinkedIn, website optional (only show if present)
  - [x] Style header with centered alignment and proper spacing

- [x] **Task 3: Implement Summary Section** (AC: 2)
  - [x] Create summary section below header
  - [x] Add section title "Professional Summary" with `<h2>`
  - [x] Render summary text with proper line height and spacing
  - [x] Make summary optional (only render if `cv.summary` exists)
  - [x] Apply text formatting with consistent paragraph spacing

- [x] **Task 4: Implement Experience Section** (AC: 2, 5)
  - [x] Create experience section with title "Work Experience"
  - [x] Map over `cv.experience` array to render each item
  - [x] For each experience item, display:
    - [x] Company name in bold
    - [x] Role/position with emphasis
    - [x] Location (if provided)
    - [x] Date range (format: "Jan 2020 - Present" or "Jan 2020 - Dec 2022")
    - [x] Use "Present" if `current: true`
    - [x] Bullet points list with all achievement bullets
  - [x] Format dates using date-fns: `format(new Date(startDate), 'MMM yyyy')`
  - [x] Add visual hierarchy: company/role more prominent than dates
  - [x] Add spacing between experience entries

- [x] **Task 5: Implement Education Section** (AC: 2, 6)
  - [x] Create education section with title "Education"
  - [x] Map over `cv.education` array to render each item
  - [x] For each education item, display:
    - [x] Institution name in bold
    - [x] Degree and field (e.g., "Bachelor of Science in Computer Science")
    - [x] Location (if provided)
    - [x] Date range (same format as experience)
    - [x] GPA (if provided)
    - [x] Achievements list (bullet points)
  - [x] Format dates consistently with experience section
  - [x] Add spacing between education entries

- [x] **Task 6: Implement Skills Section** (AC: 2)
  - [x] Create skills section with title "Skills"
  - [x] Render skills as inline comma-separated list or tag-style pills
  - [x] Map over `cv.skills` array
  - [x] Apply consistent styling with slight background color for readability
  - [x] Wrap skills to multiple lines if needed

- [x] **Task 7: Implement Projects Section** (AC: 2)
  - [x] Create projects section with title "Projects"
  - [x] Map over `cv.projects` array to render each item
  - [x] For each project, display:
    - [x] Project name in bold (with link if `url` provided)
    - [x] Description paragraph
    - [x] Technologies used (comma-separated or tags)
    - [x] Date range (if provided)
    - [x] Highlights as bullet points
  - [x] Make project links open in new tab with `target="_blank" rel="noopener"`
  - [x] Add spacing between project entries

- [x] **Task 8: Add CSS Custom Properties for Design Customization** (AC: 4)
  - [x] Define CSS custom properties (CSS variables) in template wrapper div:
    - [x] `--cv-color-primary`: Primary brand color (default: #2563eb)
    - [x] `--cv-color-accent`: Accent color (default: #0ea5e9)
    - [x] `--cv-color-text`: Main text color (default: #1f2937)
    - [x] `--cv-color-background`: Background color (default: #ffffff)
    - [x] `--cv-font-heading`: Heading font family (default: 'Inter')
    - [x] `--cv-font-body`: Body font family (default: 'Inter')
    - [x] `--cv-heading-size`: Heading font size (default: 24px)
    - [x] `--cv-body-size`: Body font size (default: 14px)
    - [x] `--cv-line-height`: Line height (default: 1.6)
    - [x] `--cv-spacing-section`: Section margin (default: 24px)
    - [x] `--cv-spacing-content`: Content padding (default: 16px)
  - [x] Apply variables from `designSettings` prop if provided
  - [x] Use CSS variables throughout component styling
  - [x] Ensure all colors, fonts, and spacing reference CSS vars

- [x] **Task 9: Implement Responsive Design** (AC: 3)
  - [x] Add mobile breakpoint (< 768px) with adjusted spacing
  - [x] Ensure single-column layout on all screen sizes
  - [x] Reduce font sizes slightly on mobile (scale by 0.9)
  - [x] Adjust padding/margins for mobile (reduce by 25%)
  - [x] Test responsive behavior with browser DevTools
  - [x] Ensure no horizontal scroll on small screens
  - [x] Use Tailwind responsive classes: `text-base md:text-lg`, `px-4 md:px-8`

- [x] **Task 10: Add Print Styles for PDF Export** (AC: 1, 7)
  - [x] Add print media query styles
  - [x] Set page size to A4 (210mm × 297mm)
  - [x] Remove background colors in print mode
  - [x] Ensure black text on white background for printing
  - [x] Add page break rules to avoid awkward section splits
  - [x] Test print preview in browser

- [x] **Task 11: Create Template Preview Route for Testing** (AC: 7)
  - [x] Create development-only route: `app/(authenticated)/cv-preview/page.tsx`
  - [x] Import ModernTechTemplate component
  - [x] Load placeholder CV data from `lib/utils/cv-placeholders.ts`
  - [x] Render template with placeholder data
  - [x] Add toggle for different design settings (light/dark theme test)
  - [x] Add button to trigger print preview
  - [x] Add note: "Dev Only - Will be removed in production"
  - [x] Add link from Dashboard to preview route

- [x] **Task 12: Write Component Tests** (Testing)
  - [x] Create test file: `__tests__/components/cv-templates/modern-tech-template.test.tsx`
  - [x] Test rendering with complete CV data (all sections present)
  - [x] Test rendering with minimal CV data (only required fields)
  - [x] Test conditional rendering (optional fields like phone, website)
  - [x] Test "Present" date formatting for current jobs (`current: true`)
  - [x] Test that external links have `rel="noopener"` attribute
  - [x] Test CSS custom properties are applied from designSettings prop
  - [x] Test responsive classes are present on elements
  - [x] Mock date-fns formatting functions
  - [x] Run tests with `npm test`

- [x] **Task 13: Update Type Definitions** (AC: 7)
  - [x] Ensure `DesignSettings` type exists in `types/cv-content.ts` (or create it)
  - [x] Define default design settings constant in `lib/constants/design-defaults.ts`:
    - [x] Export `DEFAULT_DESIGN_SETTINGS` object matching DesignSettings interface
  - [x] Export template component types for reuse
  - [x] Create additional design presets (compact, spacious, color variations)

- [x] **Task 14: Update Documentation** (AC: All)
  - [x] Add "CV Templates" section to README
  - [x] Document Modern Tech template features
  - [x] Document CSS custom properties and their defaults
  - [x] Add code examples for template usage
  - [x] Document how to test template with preview route
  - [x] Document available design presets

---

## Dev Notes

### Previous Story Insights

From Story 2.1 (CV Data Model and State Management):
- CV content types already defined in `src/types/cv-content.ts`:
  - `CVContent`: Main interface with all sections
  - `PersonalInfo`: Name, email, phone, location, linkedin, website
  - `ExperienceItem`: Company, role, dates, current flag, bullets, location
  - `EducationItem`: Institution, degree, field, dates, gpa, achievements
  - `ProjectItem`: Name, description, technologies, url, highlights, dates
- Placeholder CV data generator available in `src/lib/utils/cv-placeholders.ts`
- Function `getDefaultCVContent()` returns complete sample CV

From Story 1.5 (Dashboard):
- Tailwind CSS configured and working
- shadcn/ui components available in `components/ui/`
- Inter font already loaded in layout

### Tech Stack - Frontend

[Source: architecture/tech-stack.md]

**UI Framework:**
- Next.js 15+ App Router with React Server Components
- TypeScript 5.3+ (strict mode)
- Tailwind CSS 3.4+ for utility-first styling

**Component Library:**
- shadcn/ui (latest) - Pre-built accessible components
- Radix UI primitives (headless components)
- Lucide React for icons

**Date Handling:**
- date-fns 3.0+ - Lightweight date formatting and manipulation

**CSS Framework:**
- Tailwind CSS with custom design system
- CSS Custom Properties for dynamic theming

### Component Architecture

[Source: architecture/frontend-architecture.md]

**Component Structure:**
```
components/
├── ui/                    # shadcn/ui components (existing)
├── cv-templates/          # NEW - Template components
│   ├── modern-tech-template.tsx
│   └── (future templates)
```

**Component Patterns:**
- Props-based rendering (receive CV data as props)
- No internal state (pure presentation component)
- CSS variables for dynamic styling
- Responsive design with Tailwind breakpoints

### CV Template Requirements

[Source: PRD Epic 2 Story 2.2, architecture/components.md]

**Modern Tech Template Features:**
- Clean, single-column layout
- Professional typography hierarchy
- Responsive (desktop 1440px+, tablet 768px+)
- Print-friendly (A4 page size)
- CSS custom properties for design panel integration

**Template Sections (in order):**
1. Header - Name + Contact Info
2. Professional Summary (optional)
3. Work Experience
4. Education
5. Skills
6. Projects

**Design Requirements:**
- Primary color: #2563eb (blue)
- Font family: Inter (already loaded)
- Font sizes: 24px headings, 14px body
- Line height: 1.6 for readability
- Section spacing: 24px between sections
- Content padding: 16px

### CSS Custom Properties for Design Panel

[Source: architecture/tech-stack.md, architecture/coding-standards.md]

**CSS Variables Pattern:**
```typescript
// Component wrapper div
<div style={{
  '--cv-color-primary': designSettings?.colors.primary ?? '#2563eb',
  '--cv-color-accent': designSettings?.colors.accent ?? '#0ea5e9',
  '--cv-color-text': designSettings?.colors.text ?? '#1f2937',
  '--cv-color-background': designSettings?.colors.background ?? '#ffffff',
  '--cv-font-heading': designSettings?.typography.fontPairing ?? 'Inter',
  '--cv-font-body': designSettings?.typography.fontPairing ?? 'Inter',
  '--cv-heading-size': `${designSettings?.typography.headingSize ?? 24}px`,
  '--cv-body-size': `${designSettings?.typography.bodySize ?? 14}px`,
  '--cv-line-height': designSettings?.typography.lineHeight ?? 1.6,
  '--cv-spacing-section': `${designSettings?.spacing.sectionMargin ?? 24}px`,
  '--cv-spacing-content': `${designSettings?.spacing.contentPadding ?? 16}px`,
} as React.CSSProperties}>
  {/* Template content */}
</div>
```

**Usage in Tailwind:**
```tsx
<h1 className="text-[var(--cv-heading-size)] font-[var(--cv-font-heading)] text-[var(--cv-color-text)]">
  {cv.personalInfo.name}
</h1>
```

### Date Formatting

[Source: architecture/tech-stack.md]

**date-fns Usage:**
```typescript
import { format } from 'date-fns';

// Format dates consistently
const formatDate = (dateString: string) => {
  return format(new Date(dateString), 'MMM yyyy'); // "Jan 2020"
};

// Handle current jobs
const endDateDisplay = experience.current ? 'Present' : formatDate(experience.endDate!);
```

**Installation:**
```bash
npm install date-fns
```

### Responsive Design Strategy

[Source: architecture/frontend-architecture.md, architecture/tech-stack.md]

**Tailwind Breakpoints:**
- Mobile: `< 768px` (default, no prefix)
- Tablet: `md:` (768px+)
- Desktop: `lg:` (1024px+)

**Responsive Patterns:**
```tsx
// Font sizes
<h1 className="text-2xl md:text-3xl lg:text-4xl">

// Spacing
<div className="px-4 md:px-8 lg:px-12">

// Layout
<div className="space-y-4 md:space-y-6">
```

### Print Styles

[Source: architecture/components.md, PRD FR14]

**Print Media Query:**
```css
@media print {
  @page {
    size: A4;
    margin: 15mm;
  }

  body {
    background: white !important;
    color: black !important;
  }

  /* Avoid page breaks inside sections */
  .cv-section {
    page-break-inside: avoid;
  }
}
```

### File Locations

[Source: architecture/unified-project-structure.md]

**Files to Create:**
- `components/cv-templates/modern-tech-template.tsx` - Main template component
- `lib/constants/design-defaults.ts` - Default design settings constant
- `app/(authenticated)/templates/preview/page.tsx` - Dev preview route (temporary)
- `__tests__/components/cv-templates/modern-tech-template.test.tsx` - Component tests

**Files to Reference:**
- `types/cv-content.ts` - CV content types (from Story 2.1)
- `lib/utils/cv-placeholders.ts` - Placeholder CV data (from Story 2.1)

**Project Structure:**
```
components/
├── cv-templates/              # NEW
│   └── modern-tech-template.tsx
lib/
├── constants/                 # NEW
│   └── design-defaults.ts
app/
└── (authenticated)/
    └── templates/             # NEW - Dev only
        └── preview/
            └── page.tsx
```

### Icons

[Source: architecture/tech-stack.md]

**Lucide React Icons:**
- Already available via shadcn/ui dependency
- Import: `import { Mail, Phone, MapPin, Linkedin, Globe } from 'lucide-react'`
- Usage: `<Mail className="w-4 h-4" />`

### Coding Standards

[Source: architecture/coding-standards.md]

**Component Naming:**
- Component file: `modern-tech-template.tsx` (kebab-case)
- Component name: `ModernTechTemplate` (PascalCase)
- Export: `export default ModernTechTemplate`

**Type Safety:**
- Strict TypeScript mode (no `any` types)
- Define props interface explicitly
- Use types from `types/cv-content.ts`

**CSS Approach:**
- Tailwind utility classes for layout and spacing
- CSS custom properties for themeable values
- No inline styles except CSS variable definitions

### Testing Strategy

[Source: architecture/testing-strategy.md]

**Component Testing:**
- Use Vitest + React Testing Library
- Test file location: `__tests__/components/cv-templates/`
- Focus on rendering logic and conditional display
- Mock date-fns for consistent date formatting

**Test Coverage:**
- Rendering with complete data (all fields present)
- Rendering with minimal data (only required fields)
- Conditional rendering (optional fields)
- Responsive classes applied
- CSS custom properties applied
- External link security (`rel="noopener"`)

**Mock Patterns:**
```typescript
// Mock date-fns
vi.mock('date-fns', () => ({
  format: vi.fn((date, formatStr) => 'Jan 2020'),
}));
```

### Design System

[Source: architecture/frontend-architecture.md, PRD Epic 3]

**Default Design Settings:**
```typescript
export const DEFAULT_DESIGN_SETTINGS: DesignSettings = {
  colors: {
    primary: '#2563eb',      // Blue 600
    accent: '#0ea5e9',       // Sky 500
    text: '#1f2937',         // Gray 800
    background: '#ffffff',   // White
  },
  typography: {
    fontPairing: 'Inter',
    headingSize: 24,
    bodySize: 14,
    lineHeight: 1.6,
  },
  spacing: {
    density: 1,              // 1 = normal, 0.8 = compact, 1.2 = spacious
    sectionMargin: 24,
    contentPadding: 16,
  },
  layout: {
    sectionOrder: ['personalInfo', 'summary', 'experience', 'education', 'skills', 'projects'],
  },
};
```

### Project Structure Alignment

[Source: architecture/unified-project-structure.md]

**No Conflicts Found** - All file locations align with defined structure.

**New Directories:**
- `components/cv-templates/` - Template components (follows component organization pattern)
- `lib/constants/` - Application constants (standard practice)
- `app/(authenticated)/templates/preview/` - Dev-only preview route (authenticated route group)

---

## Dev Notes - Testing

### Testing Standards

[Source: architecture/testing-strategy.md]

**Test Organization:**
- Component tests: `__tests__/components/cv-templates/modern-tech-template.test.tsx`
- Use Vitest + React Testing Library
- Focus on rendering logic, not implementation details

**Component Testing Approach:**
- Render with sample CV data
- Test conditional rendering (optional fields)
- Verify all sections render correctly
- Check accessibility (semantic HTML, ARIA attributes)
- Test responsive classes are applied

**Mock Requirements:**
- Mock `date-fns` for consistent date output
- Use placeholder CV data from `lib/utils/cv-placeholders.ts`

**Test Coverage Requirements:**
- Component rendering: 80%+ (focus on conditional logic)
- Edge cases: 100% (missing optional fields, empty arrays)

### Pre-Implementation Checklist

**Before Starting:**
- [ ] Verify CV content types exist in `types/cv-content.ts` (from Story 2.1)
- [ ] Verify placeholder CV data exists in `lib/utils/cv-placeholders.ts`
- [ ] Confirm Tailwind CSS is configured
- [ ] Confirm Inter font is loaded in layout
- [ ] Install date-fns if not already: `npm install date-fns`
- [ ] Install lucide-react if not already: `npm install lucide-react`

**During Implementation:**
- [ ] Follow TypeScript strict mode (no `any` types)
- [ ] Use Tailwind utility classes for styling
- [ ] Define CSS custom properties for all themeable values
- [ ] Ensure responsive design with Tailwind breakpoints
- [ ] Add print styles with media query

**After Implementation:**
- [ ] All tests pass (`npm test`)
- [ ] Linting passes (`npm run lint`)
- [ ] Type checking passes (`npm run type-check`)
- [ ] Component renders correctly in preview route
- [ ] Responsive design works on mobile/tablet/desktop
- [ ] Print preview shows proper A4 layout

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-19 | 1.0 | Initial story creation | Bob (Scrum Master) |

---

## Dev Agent Record

### Agent Model Used

claude-sonnet-4-5-20250929 (Sonnet 4.5)

### Debug Log References

_To be populated by Dev Agent_

### Completion Notes List

1. **Template Implementation**: Successfully created Modern Tech CV template with all required sections (header, summary, experience, education, skills, projects)
2. **shadcn/ui Integration**: Enhanced template with Badge, Separator, and Tooltip components for better UX and accessibility
3. **CSS Custom Properties**: Implemented full design customization system via CSS variables for colors, typography, and spacing
4. **Responsive Design**: Applied Tailwind responsive classes (md: breakpoints) throughout template
5. **Print Styles**: Added comprehensive print media queries in globals.css for A4 PDF export
6. **Type Definitions**: Moved DesignSettings type to shared types/cv-content.ts for reusability
7. **Design Presets**: Created DEFAULT, COMPACT, and SPACIOUS design presets with color variations
8. **Preview Route**: Built /cv-preview page with print button and "Back to Dashboard" navigation
9. **Dashboard Integration**: Added "Preview Template" button to dashboard for easy access
10. **Testing**: Created comprehensive test suite with 11 test groups covering rendering, conditional logic, dates, security, CSS props, responsive design, and accessibility
11. **Documentation**: Added detailed CV Templates section to README with code examples and usage instructions
12. **Linting**: All code passes ESLint with zero errors (only 1 warning in auto-generated coverage file)

### File List

**New Files Created:**
- `src/components/cv-templates/modern-tech-template.tsx` - Main template component (337 lines)
- `src/lib/constants/design-defaults.ts` - Design preset constants (106 lines)
- `src/app/(authenticated)/cv-preview/page.tsx` - Preview route (61 lines)
- `__tests__/components/cv-templates/modern-tech-template.test.tsx` - Component tests (345 lines)
- `src/components/ui/badge.tsx` - shadcn/ui Badge component (auto-installed)
- `src/components/ui/tooltip.tsx` - shadcn/ui Tooltip component (auto-installed)

**Modified Files:**
- `src/types/cv-content.ts` - Added DesignSettings interface
- `src/app/(authenticated)/dashboard/page.tsx` - Added Preview Template button
- `src/app/globals.css` - Added print media queries for CV templates
- `README.md` - Added CV Templates section with documentation
- `docs/stories/2.2.story.md` - Updated all task checkboxes and completion notes

**Total Lines of Code:** ~850 lines (excluding tests and documentation)

---

## QA Results

_To be populated by QA Agent_
